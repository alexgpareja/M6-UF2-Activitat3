<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <!-- Defineix la classe Reserva i la seva taula a la base de dades -->
    <class name="com.alex_gil.model.Reserva" table="Reserva">
        <!-- Identificador únic de la reserva -->
        <id name="idReserva" type="int" column="id_reserva">
            <generator class="identity"/> <!-- Generació automàtica de l'ID -->
        </id>

        <!-- Data de reserva -->
        <property name="dataReserva" type="timestamp" column="data_reserva" not-null="true"/>

        <!-- Data de retorn -->
        <property name="dataRetorn" type="timestamp" column="data_retorn" not-null="true"/>

        <!-- Relació Many-to-One amb Usuari -->
        <many-to-one name="usuari" class="com.alex_gil.model.Usuari" column="dni" not-null="true"/>

        <!-- Relació Many-to-Many amb Llibre (taula intermèdia Reserva_Llibre) -->
        <set name="llibres" table="Reserva_Llibre" cascade="all">
            <key column="id_reserva"/> <!-- Clau forana de Reserva -->
            <many-to-many class="com.alex_gil.model.Llibre" column="id_llibre"/> <!-- Clau forana de Llibre -->
        </set>
    </class>
</hibernate-mapping>